UNFINISHED

# **nlif_m.factorio_server**
=========

## Description

This role provides a running factorio headless server.
At this time support only *systemd* and *apt* based distros.

## Requirements
------------

None.

## Role Variables
--------------

- `factorio_version`
  - Default: `1.1.104`
  - Description: A factorio headless server version, if changed must change `factorio_download_checksum`.
  - Type: str
  - Required: no
- `factorio_download_checksum`
  - Default: `sha256:8e13353ab23d57989db7b06594411d30885de1a923f3a989d12749c1abc01583`
  - Description: A factorio headless server tar archive checksum. You can get it [here](https://www.factorio.com/download/sha256sums) look for `factorio_headless_x64_VERSION.tar.xz`
  - Type: str
  - Required: no
- `factorio_username`
  - Default: `factorio`
  - Description: A OS user to run server.
  - Type: str
  - Required: no
- `factorio_main_dir`
  - Default: `/opt/factorio`
  - Description: A directory at server where all factorio related data will be stored.
  - Type: str
  - Required: no
- `factorio_saves_dir`
  - Default: `/opt/factorio/saves`
  - Description: A directory at server where all factorio saves will be stored.
  - Type: str
  - Required: no
- `factorio_local_save_path`
  - Default: ``
  - Description: A path that provides a already existing factorio save to be uploaded to server instead of autogenerated one.
  - Type: str
  - Required: no
- `factorio_server_port`
  - Default: `34197`
  - Description: A port on which game server will listen.
  - Type: int
  - Required: no
- `factorio_server_settings_file_name`
  - Default: `server-settings.json`
  - Description: A filename for server settings.
  - Type: str
  - Required: no
- `factorio_game_save_name`
  - Default: `factorio_save.zip`
  - Description: A filename for game save.
  - Type: str
  - Required: no
- `factorio_systemd_service_name`
  - Default: `factorio.service`
  - Description: A name for systemd service that launch game server.
  - Type: str
  - Required: no

*Server-settings.json* related variables

- `factorio_server_name`
  - Default: `Name of the game as it will appear in the game listing`
  - Description: Name of the game as it will appear in the game listing.
  - Type: str
  - Required: no
- `factorio_server_description`
  - Default: `Description of the game that will appear in the listing`
  - Description: Description of the game that will appear in the listing.
  - Type: str
  - Required: no
- `factorio_server_visibility_public`
  - Default: `false`
  - Description: Game will be published on the official Factorio matching server.
  - Type: bool
  - Required: no
- `factorio_server_visibility_lan`
  - Default: `true`
  - Description: Game will be broadcast on LAN.
  - Type: bool
  - Required: no
- `factorio_server_username`
  - Default: ""
  - Description: Your factorio.com login username. Required for games with visibility public.
  - Type: str
  - Required: no
- `factorio_server_password`
  - Default: ""
  - Description: Your factorio.com login password. Required for games with visibility public.
  - Type: bool
  - Required: no
- `factorio_server_token`
  - Default: ""
  - Description: Authentication token. May be used instead of 'factorio_server_password'.
  - Type: str
  - Required: no
- `factorio_server_game_password`
  - Default: "123"
  - Description: A server password that is required for server connection.
  - Type: str
  - Required: no
- `factorio_server_require_user_verification`
  - Default: `false`
  - Description: When set to true, the server will only allow clients that have a valid Factorio.com account.
  - Type: bool
  - Required: no
- `factorio_server_autosave_slots`
  - Default: `5`
  - Description: Server autosave slots, it is cycled through when the server autosaves.
  - Type: int
  - Required: no
- `factorio_server_auto_pause`
  - Default: `true`
  - Description: Whether should the server be paused when no players are present.
  - Type: bool
  - Required: no
- `factorio_server_only_admins_can_pause_the_game`
  - Default: `false`
  - Description: Whether should only admins pause the game.
  - Type: bool
  - Required: no
- `factorio_server_autosave_only_on_server`
  - Default: `true`
  - Description: Whether autosaves should be saved only on server or also on all connected clients.
  - Type: bool
  - Required: no

## Dependencies
------------

None.

## Example Playbook
----------------
```yml
- hosts: factorio_servers
  roles:
    - nlif_m.factorio_server
  vars:
    factorio_server_name: "factorio.example.com"
    factorio_server_description: "Best server btw"
    factorio_server_game_password: "1232341243"
```

If you want to upload existing save you can provide in cli:
```shell
ansible-playbook -i inventory.yml factorio.yml  --extra-vars=factorio_local_save_path="/path/to/factorio_save.zip"
```

License
-------

MIT

Author Information
------------------

https://github.com/nlif-m
